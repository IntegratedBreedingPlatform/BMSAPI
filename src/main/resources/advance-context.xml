<?xml version="1.0" encoding="ISO-8859-1"?>

<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:context="http://www.springframework.org/schema/context"
	   xmlns="http://www.springframework.org/schema/beans" xmlns:tx="http://www.springframework.org/schema/tx"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans-4.1.xsd
			http://www.springframework.org/schema/context
			http://www.springframework.org/schema/context/spring-context-4.1.xsd">

	<context:component-scan base-package="org.generationcp.middleware.ruleengine.naming.expression.dataprocessor"/>

    <!--
        The post processor factory will automatically generate a bean post processor that will handle the
        automatic registration of component-scanned classes into a target factory / registry instead of having
        to have a separate class for each bean post processor
        -->
	<bean id="postProcessorFactory" class="org.generationcp.middleware.spring.util.ComponentPostProcessorFactory"/>

	<bean id="dataProcessorFactory" class="org.generationcp.middleware.ruleengine.naming.expression.dataprocessor.ExpressionDataProcessorFactory"/>

	<bean factory-bean="postProcessorFactory" factory-method="generatePostProcessorFactory">
        <constructor-arg name="componentClass" type="java.lang.Class" value="org.generationcp.middleware.ruleengine.naming.expression.dataprocessor.ExpressionDataProcessor"/>
        <constructor-arg name="factoryInstance" ref="dataProcessorFactory"/>
    </bean>

</beans>
