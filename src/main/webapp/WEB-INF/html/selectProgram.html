<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<title>BMS API - Home</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" 	/>
	<link th:href="@{/static/css/lib/bootstrap.min.css}" rel="stylesheet"/>
	<script th:src="@{/static/js/lib/jquery.min.js}" type="text/javascript"></script>
	<script th:src="@{/static/js/lib/bootstrap.min.js}" type="text/javascript"></script>    
	  
    <script type="text/javascript">
    	$(document).ready(function() {
    		$('#selectedProgramId').change(function(){
    			if($("#selectedProgramId").val() != 0) {
 			   		$("#programSelectionForm").trigger('submit');
    			}
 			});
    	});
    </script>
</head>

<body>
	<nav class="navbar navbar-default" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" th:href="@{/}">BMS API</a>
			</div>
		</div>
	</nav>
	<div class="container swagger-section">
		<div class="container-fluid">
			<div th:if="${#lists.size(availablePrograms) != 0}">
				<form role="form" id="programSelectionForm" action="/selectProgram" method="POST">
					<div class="form-group">
						<label>Please select a program to work with:</label>
					</div>
					<div class="form-group">
						<select id="selectedProgramId" name="selectedProgramId" class="form-control">
							<option value="0">- Select -</option>
							<option th:each="program : ${availablePrograms}" th:value="${program.projectId}" th:text="${program.projectName + '  [' + program.centralDbName + ']  [' + program.localDbName + ']'}" 
								th:selected="${program.getProjectId().toString().equals(#httpSession.getAttribute('selectedProgramId'))}" />
						</select>
					</div>
					<input type="hidden" name="redirectURL" value="/" />
				</form>
			</div>
			<div th:if="${#lists.size(availablePrograms) == 0}">
				<label>There are no programs in your BMS installation. Please create one to begin.</label>
			</div>
		</div>
	</div>
</body>
</html>